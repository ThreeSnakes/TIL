# 레이턴시와 대역폭 이해의 첫걸음

### 속도는 하나의 특징이다.
#### 온라인 비즈니스의 최소한의 성능을 보장하기 위한 최소 요건
- 웹사이트가 빠를수록 사용자를 더 오래 붙잡아 둘 수 있다.
- 웹사이트가 빠를수록 사용자의 재방문율을 향상시킨다.
- 웹사이트가 빠를수록 사용자의 구매 전환율을 향상시킨다.

> 결국 사용자는 웹사이트의 속도가 빠를수록 해당 웹사이트를 많이 머물고 이용 한다는 것이다. 개발 함에 있어서 웹사이트가 빠르게 동작하도록 해야 한다는 것이다. 

#### 네트워크 트래픽의 성능을 좌우하는 두가지 중요 요소
- 레이턴시
    - 패킷을 전송하는 곳에서부터 전달 받는 곳까지 이동하는 데 걸리는 시간
- 대역폭
    - 논리적인 혹은 물리적인 통신 경로의 최대 처리량

> 사용자와 서버를 긴 터널로 생각 했을때, 레이턴씨는 사용자 <--> 서버의 터널의 길이를 의미할 수 있으며, 대역폭은 터널의 너비라고 생각 하면 된다. 일반적으로 많이 사용하는 인터넷, 웹서핑을 할때에는 많은 데이터를 사용하는게 아니므로 터널의 너비(대역폭)은 좁아도 상관 없다.(동영상 시청이나 파일 다운로드 같은 경우 대역폭의 넓이도 중요해진다.) 다만 길이가 길면 길수록 도달하는 시간이 길어지므로 레이턴시를 줄여야 한다. 이 레이턴시를 어떻게 줄이느냐가 핵심이라 볼 수 있다. 또한 레이턴시는 대역폭에 비하여 상대적으로 비싸다.

#### 레이턴시의 구성요소
- 레이턴시는 메시지나 패킷이 출발점(사용자)에서 도착점까지 이동하는데 걸리는 시간을 말한다.
- 레이턴시의 구성요는 다음과 같다.
    - 전파 지연 (propagation delay)
        - 메시지가 송신자에서 수신자로 이동하는데 필요한 시간. `(총 이동거리 / 신호의 속도) `
    - 전송 지연 (transmission delay)
        - 링크로 패킷의 모든 비트를 내보내는데 필요한 시간. `( 패킷의 길이 / 데이터 전송 속도)`
    - 프로세싱 지연 (processing delay)
        - 패킿 헤더를 처리하고 비트 수준의 에러를 체크하고 목적지를 알아내는데 필요한 시간 
    - 큐잉 지연 (queuing delay)
        - 패킷이 처리 될떄까지 큐에서 대기하는 시간.
- 위 4가지를 합친것이 클라이언트와 서버간의 총 레이턴시이다.
- 데이터의 이동거리가 멀수록 `전파 지연` 시간은 늘어나고 중간 단계에서 라우터를 만날 떄마다 각 패킷은 `프로세싱 지연`과 `전송 지연`을 겪게 된다. 또한 이동 중에 트래필이 높을수록 패킷이 인커밍 버퍼에서 지연될 확률도 높아 진다. 
- 이러한 시간을 줄이기 위한 방법으로 `Content Delivery Network(CDN)`가 사용된다. `CDN`은 여러 지점에 콘텐츠를 배분하여 클라이언트와 가장 가까운 지점에서 데이터를 전달 받도록 하는 것이다.

> 즉, 사용자들에게 최상의 경험을 주기 위해서는 결국 이 레이턴시를 잘 관리하고 줄이는것이 웹 개발을 진행 할때 중요하게 생각 해야 한다. 이러한 시간을 줄일 수 있는 방법이 무엇이 있느지 공부하고 고민, 생각해 봐야 한다.

#### 최종 마일 레이턴시(Last-Mile Latency)
- 대부분의 레이턴시는 마지막 지점에서 발생한다. 이는 집에서 사무실을 인터넷에 연결 하기 위해 `ISP(Internet Service Provider, EX) KT, SK Boradband 등)`가 각 배분하는데, 이떄 사용하는 기술에 따라서 시간 차이가 발생 한다. 
- `ISP`를 변경 함에 따라서 웹 브라우징 속도가 차이 날 수 있다.
- 대부분의 웹사이트들에서 성능의 병목점은 `대역폭`이아닌 `레이턴시`이다.

#### 코어 네트워(Core Networks)의 대역폭
- 기억할만한 부분 없어 보임

#### 네트워크 가장자리(Network Edge)에서의 대역폭
- 기억할만한 부분 없어 보임

#### 높은 대역폭과 낮은 레이턴시 제공
- 레이턴시는 일반적으로 빛의 속도보다 낮다. 물리적인 한계로 인해서 빛의 속도보다는 빠를 수 없다. 즉 최대로 높일수 있는 한계가 있다는 것이다. 속도를 높이지 못한다면 거리를 줄여야 한다. 그렇다면 거리를 줄이기 위해서는 새로운 케이블을 까는 것인데.. 이는 현식적으로 많이 힘들다.
- *_주어진 대역폭과 빛의 속도라는 한계점을 분명하게 인식하고 프로토콜과 네트워킹 코드를 설계 해야 한다. 왕복거리를 줄이고, 클라이언트와 가까운 곳에 데이터를 위치시키고, 레이턴시를 감추기 위해 `캐싱`, `프리패칭(pre-fetching)`, 그 밖의 기술을 사용 해야 하는것이다._*

> 마지막 라인에 잘 써있다. 이를 기억하자.s

